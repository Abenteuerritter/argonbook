---

- name: install build requirements
  with_items:
    - git
    - unzip
  apt: name={{ item }} state=latest

- name: install composer
  get_url:
    url: https://getcomposer.org/composer.phar
    dest: /usr/local/bin/composer
    mode: 0755

#- name: nodejs key
#  apt_key:
#    url: https://deb.nodesource.com/gpgkey/nodesource.gpg.key
#    state: present

#- name: nodejs repository
#  apt_repository:
#    repo: deb https://deb.nodesource.com/node_6.x {{ ansible_distribution_release }} main
#    update_cache: yes
#    state: present

# ^^ https://github.com/ansible/ansible/issues/12161

- name: setup nodejs
  shell: curl -sL https://deb.nodesource.com/setup_6.x | bash -
  args:
    warn: no

- name: install nodejs
  apt: name=nodejs state=latest

- name: install gulp
  npm: name=gulp-cli global=yes state=latest

- name: install bower
  npm: name=bower global=yes state=latest
